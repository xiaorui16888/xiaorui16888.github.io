{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{414:function(s,t,a){\"use strict\";a.r(t);var n=a(56),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"elasticsearch-kibana设置用户名密码登陆\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#elasticsearch-kibana设置用户名密码登陆\"}},[s._v(\"#\")]),s._v(\" ElasticSearch+Kibana设置用户名密码登陆\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"配置\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#配置\"}},[s._v(\"#\")]),s._v(\" 配置\")]),s._v(\" \"),a(\"p\",[s._v(\"修改es的配置文件：elasticsearch.yml，添加如下配置\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.security.enabled\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"true\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.license.self_generated.type\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" basic\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.security.transport.ssl.enabled\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"true\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"p\",[s._v(\"es的bin目录下，执行设置用户名和密码的命令\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[s._v(\"./elasticsearch-setup-passwords interactive\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"这里会设置六个账号的密码：\"),a(\"code\",[s._v(\"elastic,apm_system,kibana,logstash_system,beats_system,remote_monitoring_user.\")])]),s._v(\" \"),a(\"p\",[s._v(\"修改kibana的配置\"),a(\"code\",[s._v(\"kibana.yml\")]),s._v(\"：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"elasticsearch.username\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"elastic\"')]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"elasticsearch.password\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"bj778899.\"')]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"p\",[s._v(\"es修改密码的命令如下：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"curl\")]),s._v(\" -H \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Content-Type:application/json\"')]),s._v(\" -XPOST -u elastic \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'http://localhost:9200/_xpack/security/user/elastic/_password'\")]),s._v(\" -d \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\\'{ \"password\" : \"123456\" }\\'')]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"重启es和kibana\")]),s._v(\" \"),a(\"p\",[s._v(\"访问http://localhost:9200，需要输入账号密码才可以访问\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"集成thinkphp\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#集成thinkphp\"}},[s._v(\"#\")]),s._v(\" 集成ThinkPHP\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-php line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-php\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"public\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"function\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function-definition function\"}},[s._v(\"_initialize\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$hosts\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token string single-quoted-string\"}},[s._v(\"'http://localhost:8833'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$this\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"client\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name static-context\"}},[s._v(\"ClientBuilder\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"::\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"create\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"setBasicAuthentication\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string single-quoted-string\"}},[s._v(\"'elastic'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string single-quoted-string\"}},[s._v(\"'bj778899.'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"setHosts\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$hosts\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"->\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"build\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}