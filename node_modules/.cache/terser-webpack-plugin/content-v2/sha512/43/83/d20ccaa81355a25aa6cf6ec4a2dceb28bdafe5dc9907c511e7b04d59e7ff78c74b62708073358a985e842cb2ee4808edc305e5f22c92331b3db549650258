{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{411:function(s,a,t){\"use strict\";t.r(a);var e=t(56),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"linux下安装部署elasticsearch\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#linux下安装部署elasticsearch\"}},[s._v(\"#\")]),s._v(\" Linux下安装部署ElasticSearch\")]),s._v(\" \"),t(\"p\",[s._v(\"ElasticSearch，简称为\"),t(\"code\",[s._v(\"es\")]),s._v(\"。es的运行需要jdk环境，我们首先需要安装java。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"java环境篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#java环境篇\"}},[s._v(\"#\")]),s._v(\" java环境篇\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装java\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装java\"}},[s._v(\"#\")]),s._v(\" 安装java\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装jdk1.8.0的所有文件\")]),s._v(\"\\nyum \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y java-1.8.0-openjdk*\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"检查jdk\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#检查jdk\"}},[s._v(\"#\")]),s._v(\" 检查jdk\")]),s._v(\" \"),t(\"p\",[s._v(\"安装完成后，检查\"),t(\"code\",[s._v(\"jdk\")]),s._v(\"是否安装成功\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"java -version\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224234902866.png\",alt:\"image-20211224234902866\"}})]),s._v(\" \"),t(\"p\",[s._v(\"接下来，配置环境变量。其实我一直有个疑问，yum安装的java，到底需要配置环境变量吗？其实我没有配置环境变量，也一样可以运行es。这里，我们为了保险起见，还是配置一下吧。\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"配置环境变量\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#配置环境变量\"}},[s._v(\"#\")]),s._v(\" 配置环境变量\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"yum安装jdk默认安装的路径在 \"),t(\"code\",[s._v(\"/usr/lib/jvm\")])]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224234924337.png\",alt:\"image-20211224234924337\"}})])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"在\"),t(\"code\",[s._v(\"/etc/profile\")]),s._v(\"文件中添加如下命令\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# set java environment  \")]),s._v(\"\\nJAVA_HOME=/usr/lib/jvm/java\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"1.8.0\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"openjdk\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"1.8.0.181\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"3.b13.el7_5.x86_64\\nPATH=$PATH\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"$JAVA_HOME/bin  \\nCLASSPATH=.\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"$JAVA_HOME/lib/dt.jar\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"$JAVA_HOME/lib/tools.jar  \\nexport JAVA_HOME  CLASSPATH  PATH\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"保存关闭\"),t(\"code\",[s._v(\"profile\")]),s._v(\"文件，执行如下命令生效\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"source\")]),s._v(\" /etc/profile\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"使用如下命令，查看\"),t(\"code\",[s._v(\"jdk\")]),s._v(\"变量\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$JAVA_HOME\")]),s._v(\"\\n \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"$PATH\")]),s._v(\"\\n \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$CLASSPATH\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"p\",[s._v(\"输出变量值，则成功。\")])])]),s._v(\" \"),t(\"p\",[s._v(\"以上是最简单粗暴的安装java-jdk方式。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"es篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#es篇\"}},[s._v(\"#\")]),s._v(\" ES篇\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装es\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装es\"}},[s._v(\"#\")]),s._v(\" 安装es\")]),s._v(\" \"),t(\"p\",[s._v(\"你可以去官网下载\")]),s._v(\" \"),t(\"p\",[s._v(\"https://www.elastic.co/cn/downloads/elasticsearch\")]),s._v(\" \"),t(\"p\",[s._v(\"如果你觉得下载速度比较慢，可以用一些国内的镜像站。比如\"),t(\"code\",[s._v(\"华为开源镜像站\")]),s._v(\"。\")]),s._v(\" \"),t(\"p\",[s._v(\"https://repo.huaweicloud.com/elasticsearch/\")]),s._v(\" \"),t(\"p\",[s._v(\"针对自己的情况选择即可。\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"下载完成后，解压\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"tar\")]),s._v(\" -xvf elasticsearch-xxxxxx.tar.gz\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[s._v(\"修改配置文件\"),t(\"code\",[s._v(\"config/elasticsearch.yml\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[s._v(\"//添加 下面几行\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.ml.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"network.host\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" 0.0.0.0\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 开放端口\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"http.port\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8833\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#memory\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"bootstrap.memory_lock\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"bootstrap.system_call_filter\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#node\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"node.name\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" node\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\" \\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"cluster.initial_master_nodes\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"node-1\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[s._v(\"修改配置文件\"),t(\"code\",[s._v(\"config/jvm.options\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[s._v(\"//修改为，128m  不然本机1G的运行内存 用不了\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"Xms128m\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"Xmx128m\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"p\",[s._v(\"这里最大、小运行内存，具体看你服务器的配置和你的数据量。我配置比较高，我设置的4G。4*1024=4096m\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"添加linux子用户，启用es\")]),s._v(\" \"),t(\"p\",[s._v(\"因为root用户下，无法启用es的。所以只能创建一个es的子用户。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 根目录下创建用户，密码\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"useradd\")]),s._v(\" es\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 设置密码\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"passwd\")]),s._v(\" es\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"给与文件访问权限\")]),s._v(\" \"),t(\"p\",[s._v(\"你必须给与es权限，不然他没有es文件夹下的启用权限，就会报错。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chown\")]),s._v(\" -R es:es /www/software/elasticsearch\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"打开 \"),t(\"code\",[s._v(\"/etc/security/limits.conf\")]),s._v(\"，在里面添加如下内容\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"* soft nofile \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65536\")]),s._v(\"\\n* hard nofile \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65536\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"修改 \"),t(\"code\",[s._v(\"/etc/sysctl.conf\")]),s._v(\"，末尾添加下面配置\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"vm.max_map_count\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"655360\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"查看并更新生效\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"sysctl -p \\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])])])])])]),s._v(\" \"),t(\"h3\",{attrs:{id:\"启用es\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启用es\"}},[s._v(\"#\")]),s._v(\" 启用es\")]),s._v(\" \"),t(\"p\",[s._v(\"使用\"),t(\"code\",[s._v(\"es\")]),s._v(\"账号登录，启动es\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"su\")]),s._v(\" es\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /www/software/elasticsearch\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动es\")]),s._v(\"\\n./bin/elasticsearch\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"访问es\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#访问es\"}},[s._v(\"#\")]),s._v(\" 访问es\")]),s._v(\" \"),t(\"p\",[s._v(\"打开浏览器，或者\"),t(\"code\",[s._v(\"curl\")]),s._v(\"访问\")]),s._v(\" \"),t(\"p\",[s._v(\"http://localhost:8833/\")]),s._v(\" \"),t(\"p\",[s._v(\"或者http://外网ip:8833\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224234950338.png\",alt:\"image-20211224234950338\"}})]),s._v(\" \"),t(\"p\",[s._v(\"这样就启动OK了\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"基本rest命令说明\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#基本rest命令说明\"}},[s._v(\"#\")]),s._v(\" 基本Rest命令说明\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235009486.png\",alt:\"image-20211224235009486\"}})]),s._v(\" \"),t(\"h2\",{attrs:{id:\"插件篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#插件篇\"}},[s._v(\"#\")]),s._v(\" 插件篇\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装elasticsearch-head插件\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装elasticsearch-head插件\"}},[s._v(\"#\")]),s._v(\" 安装ElasticSearch Head插件\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /www/software/elasticsearch\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 拉取文件\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"git\")]),s._v(\" clone git://github.com/mobz/elasticsearch-head.git\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装依赖\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" elasticsearch-head\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" run start\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"修改默认端口号\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"访问es-head端口号\")]),s._v(\" \"),t(\"p\",[s._v(\"打开文件  \"),t(\"code\",[s._v(\"elasticsearch-head/Gruntfile.js\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"connect\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"server\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"options\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"port\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9100\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"//默认端口9100 修改自己的\")]),s._v(\"\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"base\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'.'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n\\t\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"keepalive\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),s._v(\"\\n\\t\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\t\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\t\\t\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"修改es-head插件访问es的端口号\")]),s._v(\" \"),t(\"p\",[s._v(\"打开\"),t(\"code\",[s._v(\"elasticsearch-head/_site/app.js\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"this\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"base_uri \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"this\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"config\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"base_uri \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"||\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"this\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"prefs\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"get\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"app-base_uri\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"||\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://localhost:9200\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" \\n\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"修改es配置文件 \"),t(\"code\",[s._v(\"config/elasticsearch.yml\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[s._v(\"//末尾添加 处理跨域和运行\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"http.cors.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"true\")]),s._v(\"  \\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"http.cors.allow-origin\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"*\"')]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\")])]),t(\"p\",[s._v(\"保存后，需要重新启动es。才可生效\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"./bin/elasticsearch\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])])])])])]),s._v(\" \"),t(\"p\",[s._v(\"修改完后，重启es-head即可生效\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" run restart\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"访问head插件地址\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#访问head插件地址\"}},[s._v(\"#\")]),s._v(\" 访问Head插件地址\")]),s._v(\" \"),t(\"p\",[s._v(\"打开浏览器访问\")]),s._v(\" \"),t(\"p\",[s._v(\"http://localhost:8834\")]),s._v(\" \"),t(\"p\",[s._v(\"或者 http://外网ip:8834\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235041391.png\",alt:\"image-20211224235041391\"}})]),s._v(\" \"),t(\"p\",[s._v(\"如果集群健康值，不为：红色或者灰色就OK了\")]),s._v(\" \"),t(\"p\",[s._v(\"如果你没有npm环境，就需要安装喽~\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"npm篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#npm篇\"}},[s._v(\"#\")]),s._v(\" npm篇\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装npm\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装npm\"}},[s._v(\"#\")]),s._v(\" 安装npm\")]),s._v(\" \"),t(\"p\",[s._v(\"我直接使用yum安装，很方便很粗暴\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"安装\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"curl\")]),s._v(\" --silent --location https://rpm.nodesource.com/setup_10.x \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"bash\")]),s._v(\" -\\n\\nyum \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y nodejs\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 设置淘宝镜像，速度快\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -g cnpm --registry\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"https://registry.npm.taobao.org\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装完成，查看版本号\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" -v\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"npm 升级\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装npm升级工具\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -g n\\n \\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装最近的稳定版本\")]),s._v(\"\\nn stable\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"p\",[s._v(\"这样就OK了\")])])]),s._v(\" \"),t(\"p\",[s._v(\"如果你需要把es-head插件一直在后台运行，那可以借助\"),t(\"code\",[s._v(\"nohup\")]),s._v(\"、\"),t(\"code\",[s._v(\"screen\")]),s._v(\"这样工具，防止断开ssh后，进程被杀死。\")]),s._v(\" \"),t(\"p\",[s._v(\"也可以使用\"),t(\"code\",[s._v(\"pm2\")]),s._v(\"进程管理器，保持进程一直活着。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"进程管理篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#进程管理篇\"}},[s._v(\"#\")]),s._v(\" 进程管理篇\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装pm2\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装pm2\"}},[s._v(\"#\")]),s._v(\" 安装pm2\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[s._v(\"安装\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -g pm2\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])])]),s._v(\" \"),t(\"li\",[t(\"p\",[s._v(\"运行\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动一个进程并把它命名为 es-head\")]),s._v(\"\\npm2 start \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" --name es-head -- start\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"blockquote\",[t(\"p\",[s._v(\"其他运行方式：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"pm2 start app.js -i max  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 根据有效CPU数目启动最大进程数目\")]),s._v(\"\\npm2 start app.js -i \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3\")]),s._v(\"      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动3个进程\")]),s._v(\"\\npm2 start app.js -x        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#用fork模式启动 app.js 而不是使用 cluster\")]),s._v(\"\\npm2 start app.js -x -- -a \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"23\")]),s._v(\"   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 用fork模式启动 app.js 并且传递参数 (-a 23)\")]),s._v(\"\\npm2 start app.js --name serverone  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动一个进程并把它命名为 serverone\")]),s._v(\"\\npm2 stop serverone       \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 停止 serverone 进程\")]),s._v(\"\\npm2 start app.json        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动进程, 在 app.json里设置选项\")]),s._v(\"\\npm2 start app.js -i max -- -a \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"23\")]),s._v(\"                   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#在--之后给 app.js 传递参数\")]),s._v(\"\\npm2 start app.js -i max -e err.log -o out.log  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动 并 生成一个配置文件，你也可以执行用其他语言编写的app  ( fork 模式):\")]),s._v(\"\\npm2 start my-bash-script.sh    -x --interpreter \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"bash\")]),s._v(\"\\npm2 start my-python-script.py -x --interpreter python\\n\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\")])]),t(\"p\",[s._v(\"使用命令\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"npm\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" pm2 -g     \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 命令行安装 pm2 \")]),s._v(\"\\npm2 start app.js -i \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#后台运行pm2，启动4个app.js \")]),s._v(\"\\n                              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 也可以把'max' 参数传递给 start\")]),s._v(\"\\n                              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 正确的进程数目依赖于Cpu的核心数目\")]),s._v(\"\\npm2 start app.js --name my-api \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 命名进程\")]),s._v(\"\\npm2 list               \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 显示所有进程状态\")]),s._v(\"\\npm2 monit              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 监视所有进程\")]),s._v(\"\\npm2 logs               \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#  显示所有进程日志\")]),s._v(\"\\npm2 stop all           \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 停止所有进程\")]),s._v(\"\\npm2 restart all        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 重启所有进程\")]),s._v(\"\\npm2 reload all         \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 0秒停机重载进程 (用于 NETWORKED 进程)\")]),s._v(\"\\npm2 stop \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"             \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 停止指定的进程\")]),s._v(\"\\npm2 restart \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"          \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 重启指定的进程\")]),s._v(\"\\npm2 startup            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 产生 init 脚本 保持进程活着\")]),s._v(\"\\npm2 web                \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 运行健壮的 computer API endpoint (http://localhost:9615)\")]),s._v(\"\\npm2 delete \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0\")]),s._v(\"           \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死指定的进程\")]),s._v(\"\\npm2 delete all         \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死全部进程\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\")])])])])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"kibana篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#kibana篇\"}},[s._v(\"#\")]),s._v(\" kibana篇\")]),s._v(\" \"),t(\"p\",[s._v(\"Kibana是世界上最受欢迎的开源日志分析平台ELK Stack中的“K”，它为用户提供了一个工具，用于在存储于Elasticsearch集群中的日志数据进行检索，可视化和构建仪表板。\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"安装kibana\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装kibana\"}},[s._v(\"#\")]),s._v(\" 安装kibana\")]),s._v(\" \"),t(\"p\",[s._v(\"先下载\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" http://xxxxx\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[s._v(\"如果你想体验极速下载，还是一样去华为镜像站下载。\")]),s._v(\" \"),t(\"p\",[s._v(\"然后解压\")]),s._v(\" \"),t(\"h3\",{attrs:{id:\"修改配置文件\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#修改配置文件\"}},[s._v(\"#\")]),s._v(\" 修改配置文件\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" kibana/config\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" kibana.yml\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 需要修改的配置项\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# kibana服务端口\")]),s._v(\"\\nserver.port:5601\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 如果你想公网访问，需做以下配置\")]),s._v(\"\\nserver.host: \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"0.0.0.0\"')]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# elasticsearch访问端口\")]),s._v(\"\\nelasticsearch.hosts: \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://localhost:8833\"')]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\")])]),t(\"p\",[s._v(\"我在安装的时候，报了以下错误。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"Error registering Kibana Privileges with Elasticsearch for kibana-.kibana\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[s._v(\"爬了一些帖子，也没有找到头绪。只是让关闭kibana的xpack。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 继续在kibana.yml中，添加如下配置。\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack图形功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.graph.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack机器学习功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.ml.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack监视功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.monitoring.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack报告功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.reporting.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack安全功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.security.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 禁用X-Pack观察器功能\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"xpack.watcher.enabled\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[s._v(\"false\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"启动kibana\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启动kibana\"}},[s._v(\"#\")]),s._v(\" 启动kibana\")]),s._v(\" \"),t(\"p\",[s._v(\"切换到\"),t(\"code\",[s._v(\"kibana/bin目录\")]),s._v(\"，启动kibana。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"./kibana\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[s._v(\"看到控制台输出如下，就OK了。\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235109988.png\",alt:\"image-20211224235109988\"}})]),s._v(\" \"),t(\"p\",[s._v(\"使用浏览器访问http://外网ip:5601，\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235133032.png\",alt:\"image-20211224235133032\"}})]),s._v(\" \"),t(\"h3\",{attrs:{id:\"汉化kibana\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#汉化kibana\"}},[s._v(\"#\")]),s._v(\" 汉化kibana\")]),s._v(\" \"),t(\"p\",[s._v(\"kibana 一直是 日志分析 中得力的助手，\"),t(\"code\",[s._v(\"kibana 7.x\")]),s._v(\" 中官方加入了中文的选项。\")]),s._v(\" \"),t(\"p\",[s._v(\"只需要在配置文件 \"),t(\"code\",[s._v(\"kibana.yml\")]),s._v(\" 中加入\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"i18n.locale\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"zh-CN\"')]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[s._v(\"就可以了。\")]),s._v(\" \"),t(\"p\",[s._v(\"不得不说，对于我这英语菜的人来说，简直是福音。\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235152962.png\",alt:\"image-20211224235152962\"}})]),s._v(\" \"),t(\"h3\",{attrs:{id:\"关闭kibana\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#关闭kibana\"}},[s._v(\"#\")]),s._v(\" 关闭kibana\")]),s._v(\" \"),t(\"p\",[s._v(\"使用 \"),t(\"code\",[s._v(\"netstat -tunlp|grep 5601\")]),s._v(\" 就可以查到进程id 了。\")]),s._v(\" \"),t(\"p\",[s._v(\"然后使用\"),t(\"code\",[s._v(\"kill\")]),s._v(\"关闭即可。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"logstash篇\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#logstash篇\"}},[s._v(\"#\")]),s._v(\" Logstash篇\")]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"Logstash\")]),s._v(\"是一个开源的服务器端数据处理管道，可以同时从多个数据源获取数据，并对其进行转换，然后将其发送到你最喜欢的“存储”。\")]),s._v(\" \"),t(\"p\",[s._v(\"下载这里，我就不说了，同上。\")]),s._v(\" \"),t(\"p\",[s._v(\"先准备好你的数据集，然后把数据集放到logstash目录下的\"),t(\"code\",[s._v(\"logstash-datas\")]),s._v(\"中。如果没有\"),t(\"code\",[s._v(\"logstash-datas\")]),s._v(\"文件夹，可以创建后再放入。\")]),s._v(\" \"),t(\"p\",[s._v(\"logstash不那么可视化，用起来感觉有点不爽，需要自己编写操作数据的脚本...\")]),s._v(\" \"),t(\"p\",[s._v(\"我给大家提供一个很基础的脚本，脚本中的内容需要根据你自己的目录修改一下。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" logstash.conf\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 输入的内容\")]),s._v(\"\\ninput \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"file\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 数据集\")]),s._v(\"\\n    path \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"/home/xiaowen/logstash-7.4.2/logstash-datas/movies.csv\"')]),s._v(\"\\n    start_position \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"beginning\"')]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 数据集导入日志存储地址\")]),s._v(\"\\n    sincedb_path \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"/home/xiaowen/logstash-7.4.2/logstash-datas/db_path.log\"')]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\")])]),t(\"p\",[s._v(\"然后调用logstash，开始导入数据集到\"),t(\"code\",[s._v(\"es\")]),s._v(\"中\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[t(\"code\",[s._v(\"./logstash -f \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\"/config/logstash.conf\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[s._v(\"回车后，我们会看到屏幕哗哗哗的输出很多json数据集。如果数据集比较庞大，我们需要稍等一会。如果看到屏幕不再输出字符了，我们使用\"),t(\"code\",[s._v(\"ctrl+c\")]),s._v(\"结束脚本。\")]),s._v(\" \"),t(\"p\",[s._v(\"如果导入的数据非常多，我们又担心\"),t(\"code\",[s._v(\"ssh\")]),s._v(\"会断开，可以先\"),t(\"code\",[s._v(\"screen\")]),s._v(\"一个会话，然后导入数据。\")]),s._v(\" \"),t(\"p\",[s._v(\"导入完成后，可以用\"),t(\"code\",[s._v(\"es-head\")]),s._v(\"查看导入情况。\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"Linux%E4%B8%8B%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2ElasticSearch.assets/image-20211224235212345.png\",alt:\"image-20211224235212345\"}})]),s._v(\" \"),t(\"p\",[s._v(\"我们可以通过\"),t(\"code\",[s._v(\"kibana\")]),s._v(\"去对es中的数据进行增删改查操作。\")]),s._v(\" \"),t(\"p\",[s._v(\"我最近有个项目是基于\"),t(\"code\",[s._v(\"thinkphp\")]),s._v(\"的，后续我会总结一波关于\"),t(\"code\",[s._v(\"ElasticSearch在thinkphp5中的使用\")]),s._v(\"。以及\"),t(\"code\",[s._v(\"MySQL数据以全量和增量方式，同步到ES搜索引擎中\")]),s._v(\"。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"总结\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#总结\"}},[s._v(\"#\")]),s._v(\" 总结\")]),s._v(\" \"),t(\"p\",[s._v(\"如果你搭建成功后，无法在外网访问。可以通过\"),t(\"code\",[s._v(\"放行端口\")]),s._v(\"的方式解决。\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"以下主机商必看（开端口教程，不开不能用）：\")])]),s._v(\" \"),t(\"p\",[s._v(\"腾讯云：https://www.bt.cn/bbs/thread-1229-1-1.html\")]),s._v(\" \"),t(\"p\",[s._v(\"阿里云：https://www.bt.cn/bbs/thread-2897-1-1.html\")]),s._v(\" \"),t(\"p\",[s._v(\"华为云：https://www.bt.cn/bbs/thread-3923-1-1.html\")]),s._v(\" \"),t(\"p\",[s._v(\"照猫画虎，照葫芦画瓢，你用什么端口，就放行什么端口，就OK了。\")])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}