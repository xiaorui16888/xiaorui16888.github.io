(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{426:function(s,t,e){"use strict";e.r(t);var a=e(56),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"【python】pyinstaller打包exe-程序无需python环境亦可运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#【python】pyinstaller打包exe-程序无需python环境亦可运行"}},[s._v("#")]),s._v(" 【python】pyinstaller打包exe，程序无需python环境亦可运行")]),s._v(" "),e("p",[s._v("我经常用python写一些脚本，比如爬虫、数据处理、模拟点击等等。有时候身边的朋友也会向我索取，独乐乐不如众乐乐。但是python构建的程序，需要特定的python环境才能运行，而且python版本之间相差也很大，有时候还需要通过pip安装一些依赖，总之一个字“麻烦”。")]),s._v(" "),e("p",[e("code",[s._v("pyinstaller")]),s._v(" ，一款很不错的打包工具。可以把编写的python程序代码，一键打包成exe文件。总之我用起来很舒服。")]),s._v(" "),e("h2",{attrs:{id:"安装pyinstaller"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装pyinstaller"}},[s._v("#")]),s._v(" 安装pyinstaller")]),s._v(" "),e("p",[s._v("1、安装过程非常简单，一行命令。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pip "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pyinstaller\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"打包为exe程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包为exe程序"}},[s._v("#")]),s._v(" 打包为exe程序")]),s._v(" "),e("p",[s._v("1、接下来就可以直接打包了。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pyinstaller -F main.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行完命令后，会生成几个文件夹，pycache，dist，build")]),s._v(" "),e("p",[s._v("其中"),e("code",[s._v("dist")]),s._v(" 文件夹中就是生成的exe文件。直接就可以在windows系统下运行了。")]),s._v(" "),e("p",[s._v("如果你不相信的话，可以发到你朋友的电脑上（他没有python环境的前提下），进行测试。")]),s._v(" "),e("p",[s._v("2、但是我们会发现运行"),e("code",[s._v("exe程序")]),s._v("的时候，会弹出一个"),e("code",[s._v("dos窗口")]),s._v("，是不是很不爽呢？其实我们在打包的时候，添加参数"),e("code",[s._v("-w")]),s._v("，就可以隐藏dos窗口了。那我们就开始重新打包一遍？")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pyinstaller -F -w main.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、但是我们有么有发现，打包后的程序，图标是")]),s._v(" "),e("p",[e("img",{attrs:{src:"%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234408068.png",alt:"image-20211224234408068"}})]),s._v(" "),e("p",[s._v("很丑，很丑，特别丑呢？？？")]),s._v(" "),e("p",[s._v("那怎么替换呢？还是加参数")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pyinstaller -F -w -i logo.ico main.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这会我们打开自己打包的exe程序，注意看左上角的图标，依旧是默认的tk图标（小羽毛），"),e("img",{attrs:{src:"%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234434977.png",alt:"image-20211224234434977"}})]),s._v(" "),e("p",[s._v("我还是不太喜欢这图标，那怎么办呢？？？")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("iconbitmap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jd.ico'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改窗口图标")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后再打包，命令跟之前一样")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pyinstaller -F -w -i logo.ico main.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("但是打包后，图标需和exe程序，目录保持一致。")]),s._v(" "),e("p",[e("img",{attrs:{src:"%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234455129.png",alt:"image-20211224234455129"}})]),s._v(" "),e("p",[s._v("当然你想改目录也可以。修改这句代码就可以实现。")]),s._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[s._v("window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("iconbitmap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx文件夹/yyy文件夹/jd.ico'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改窗口图标")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"如何防止别人轻松反编译自己的源代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何防止别人轻松反编译自己的源代码"}},[s._v("#")]),s._v(" 如何防止别人轻松反编译自己的源代码")]),s._v(" "),e("p",[s._v("pyinstaller，自带了自己的加密方式，只需要"),e("code",[s._v("--key=123456")]),s._v("就可以实现。这种方式只能在一定程度上防止别人轻松的脱你的壳，解你的密。作用一点点吧，具体的硬核操作，稍后我也许会说到。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("pyinstaller -F  -i jd.ico --clean -w  --key "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  JDGui.py\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("这里的clean，我只是为了清除缓存后打包，防止缓存仍存在，打包后，程序功能存在异常")])]),s._v(" "),e("h2",{attrs:{id:"加餐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加餐"}},[s._v("#")]),s._v(" 加餐")]),s._v(" "),e("p",[s._v("最后附上pyinstaller常用的几个参数，可以减少大家爬帖子浪费的时间。")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("参数")]),s._v(" "),e("th",[s._v("含义")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("-F")]),s._v(" "),e("td",[s._v("打包单个文件，生成结果是一个exe文件，如果代码都写在一个.py文件时使用，项目有多个文件时不要使用")])]),s._v(" "),e("tr",[e("td",[s._v("-i")]),s._v(" "),e("td",[s._v("指定程序的图标")])]),s._v(" "),e("tr",[e("td",[s._v("-w")]),s._v(" "),e("td",[s._v("不显示dos窗口（命令行）")])]),s._v(" "),e("tr",[e("td",[s._v("-c")]),s._v(" "),e("td",[s._v("显示dos窗口（命令行）")])]),s._v(" "),e("tr",[e("td",[s._v("-h")]),s._v(" "),e("td",[s._v("显示帮助")])]),s._v(" "),e("tr",[e("td",[s._v("-v")]),s._v(" "),e("td",[s._v("显示版本号")])]),s._v(" "),e("tr",[e("td",[s._v("--key=密码")]),s._v(" "),e("td",[s._v("加密打包")])])])]),s._v(" "),e("p",[e("strong",[s._v("不过，我感觉pyinstaller打包，有一个缺点，本来一个几十kb的代码文件，经过打包后，竟然有10多Mb")])]),s._v(" "),e("p",[e("img",{attrs:{src:"%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234529570.png",alt:"image-20211224234529570"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);