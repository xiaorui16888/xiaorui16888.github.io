<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【python】pyinstaller打包exe，程序无需python环境亦可运行 | Guo&#39;s Log</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://github.githubassets.com/favicon.ico">
    <meta name="description" content="Guo&#39;s Log">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.7d86dd3d.js" as="script"><link rel="preload" href="/assets/js/2.6390456d.js" as="script"><link rel="preload" href="/assets/js/27.980953ae.js" as="script"><link rel="prefetch" href="/assets/js/10.7320dff4.js"><link rel="prefetch" href="/assets/js/11.e54f7eeb.js"><link rel="prefetch" href="/assets/js/12.3b538d1b.js"><link rel="prefetch" href="/assets/js/13.e0a965d6.js"><link rel="prefetch" href="/assets/js/14.66d1b964.js"><link rel="prefetch" href="/assets/js/15.94529827.js"><link rel="prefetch" href="/assets/js/16.aa472e31.js"><link rel="prefetch" href="/assets/js/17.b140922a.js"><link rel="prefetch" href="/assets/js/18.0c35d821.js"><link rel="prefetch" href="/assets/js/19.797196bf.js"><link rel="prefetch" href="/assets/js/20.55a56270.js"><link rel="prefetch" href="/assets/js/21.3d4f7d4c.js"><link rel="prefetch" href="/assets/js/22.6db7ada7.js"><link rel="prefetch" href="/assets/js/23.b757c542.js"><link rel="prefetch" href="/assets/js/24.5cd7860a.js"><link rel="prefetch" href="/assets/js/25.792fc72a.js"><link rel="prefetch" href="/assets/js/26.d90d0006.js"><link rel="prefetch" href="/assets/js/28.f7a1fb85.js"><link rel="prefetch" href="/assets/js/29.194f6639.js"><link rel="prefetch" href="/assets/js/3.b3ff7d83.js"><link rel="prefetch" href="/assets/js/30.950fb8ed.js"><link rel="prefetch" href="/assets/js/31.e9e551a1.js"><link rel="prefetch" href="/assets/js/32.1084bf93.js"><link rel="prefetch" href="/assets/js/33.419c1a65.js"><link rel="prefetch" href="/assets/js/34.21db5c82.js"><link rel="prefetch" href="/assets/js/35.f4719ab0.js"><link rel="prefetch" href="/assets/js/36.8b7d6da8.js"><link rel="prefetch" href="/assets/js/37.33e8a9f5.js"><link rel="prefetch" href="/assets/js/38.4a742813.js"><link rel="prefetch" href="/assets/js/39.255836f0.js"><link rel="prefetch" href="/assets/js/4.c00350ea.js"><link rel="prefetch" href="/assets/js/40.02678d82.js"><link rel="prefetch" href="/assets/js/41.3829c20d.js"><link rel="prefetch" href="/assets/js/42.05ae0f8b.js"><link rel="prefetch" href="/assets/js/43.f26c8841.js"><link rel="prefetch" href="/assets/js/44.474b5406.js"><link rel="prefetch" href="/assets/js/45.86fe4124.js"><link rel="prefetch" href="/assets/js/46.725edcaf.js"><link rel="prefetch" href="/assets/js/47.b70d041e.js"><link rel="prefetch" href="/assets/js/48.b2145f47.js"><link rel="prefetch" href="/assets/js/49.5df08745.js"><link rel="prefetch" href="/assets/js/5.4f989433.js"><link rel="prefetch" href="/assets/js/50.b77dfc59.js"><link rel="prefetch" href="/assets/js/51.c6e222f9.js"><link rel="prefetch" href="/assets/js/52.03e6e203.js"><link rel="prefetch" href="/assets/js/53.9d260b0e.js"><link rel="prefetch" href="/assets/js/54.2e01993c.js"><link rel="prefetch" href="/assets/js/55.a484575d.js"><link rel="prefetch" href="/assets/js/56.f8d61dc4.js"><link rel="prefetch" href="/assets/js/57.f25f0c7e.js"><link rel="prefetch" href="/assets/js/58.6982672a.js"><link rel="prefetch" href="/assets/js/59.36c0231a.js"><link rel="prefetch" href="/assets/js/6.1289db6c.js"><link rel="prefetch" href="/assets/js/60.456830ca.js"><link rel="prefetch" href="/assets/js/61.6ddbf6b6.js"><link rel="prefetch" href="/assets/js/62.341c3560.js"><link rel="prefetch" href="/assets/js/63.f5980f2e.js"><link rel="prefetch" href="/assets/js/64.26dfb7fa.js"><link rel="prefetch" href="/assets/js/65.9c4c2727.js"><link rel="prefetch" href="/assets/js/66.5ea52369.js"><link rel="prefetch" href="/assets/js/67.8fd279a2.js"><link rel="prefetch" href="/assets/js/68.69364cba.js"><link rel="prefetch" href="/assets/js/69.e20f0749.js"><link rel="prefetch" href="/assets/js/7.edf05c29.js"><link rel="prefetch" href="/assets/js/70.27da2833.js"><link rel="prefetch" href="/assets/js/8.30731bef.js"><link rel="prefetch" href="/assets/js/9.98f69572.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Guo's Log</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notes/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/Essay/" class="nav-link">
  随笔
</a></div> <a href="https://github.com/xiaorui16888" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notes/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/Essay/" class="nav-link">
  随笔
</a></div> <a href="https://github.com/xiaorui16888" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AppScheme协议相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CDN</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Django</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ELK相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Github</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PHP开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python+selenium</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Python相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notes/Python相关/Python GUI中 text框里实时输出.html" class="sidebar-link">Python GUI中 text框里实时输出</a></li><li><a href="/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.html" class="active sidebar-link">【python】pyinstaller打包exe，程序无需python环境亦可运行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.html#安装pyinstaller" class="sidebar-link">安装pyinstaller</a></li><li class="sidebar-sub-header"><a href="/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.html#打包为exe程序" class="sidebar-link">打包为exe程序</a></li><li class="sidebar-sub-header"><a href="/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.html#如何防止别人轻松反编译自己的源代码" class="sidebar-link">如何防止别人轻松反编译自己的源代码</a></li><li class="sidebar-sub-header"><a href="/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.html#加餐" class="sidebar-link">加餐</a></li></ul></li><li><a href="/Notes/Python相关/使用pyinstaller打包，subprocess报“句柄无效”错误的解决方法.html" class="sidebar-link">使用pyinstaller打包，subprocess报“句柄无效”错误的解决方法</a></li><li><a href="/Notes/Python相关/切换pip源的简便方法.html" class="sidebar-link">切换pip源的简便方法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python配置相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SEO技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Websocket通讯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端疑难杂症</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>好用工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>宝塔相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信机器人开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数字货币</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>科学上网</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>营销工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>虚拟机相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件破解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>防御技巧</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="【python】pyinstaller打包exe-程序无需python环境亦可运行"><a href="#【python】pyinstaller打包exe-程序无需python环境亦可运行" class="header-anchor">#</a> 【python】pyinstaller打包exe，程序无需python环境亦可运行</h1> <p>我经常用python写一些脚本，比如爬虫、数据处理、模拟点击等等。有时候身边的朋友也会向我索取，独乐乐不如众乐乐。但是python构建的程序，需要特定的python环境才能运行，而且python版本之间相差也很大，有时候还需要通过pip安装一些依赖，总之一个字“麻烦”。</p> <p><code>pyinstaller</code> ，一款很不错的打包工具。可以把编写的python程序代码，一键打包成exe文件。总之我用起来很舒服。</p> <h2 id="安装pyinstaller"><a href="#安装pyinstaller" class="header-anchor">#</a> 安装pyinstaller</h2> <p>1、安装过程非常简单，一行命令。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pip <span class="token function">install</span> pyinstaller
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="打包为exe程序"><a href="#打包为exe程序" class="header-anchor">#</a> 打包为exe程序</h2> <p>1、接下来就可以直接打包了。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pyinstaller -F main.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行完命令后，会生成几个文件夹，pycache，dist，build</p> <p>其中<code>dist</code> 文件夹中就是生成的exe文件。直接就可以在windows系统下运行了。</p> <p>如果你不相信的话，可以发到你朋友的电脑上（他没有python环境的前提下），进行测试。</p> <p>2、但是我们会发现运行<code>exe程序</code>的时候，会弹出一个<code>dos窗口</code>，是不是很不爽呢？其实我们在打包的时候，添加参数<code>-w</code>，就可以隐藏dos窗口了。那我们就开始重新打包一遍？</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pyinstaller -F -w main.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、但是我们有么有发现，打包后的程序，图标是</p> <p><img src="%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234408068.png" alt="image-20211224234408068"></p> <p>很丑，很丑，特别丑呢？？？</p> <p>那怎么替换呢？还是加参数</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pyinstaller -F -w -i logo.ico main.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这会我们打开自己打包的exe程序，注意看左上角的图标，依旧是默认的tk图标（小羽毛），<img src="%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234434977.png" alt="image-20211224234434977"></p> <p>我还是不太喜欢这图标，那怎么办呢？？？</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>window<span class="token punctuation">.</span>iconbitmap<span class="token punctuation">(</span><span class="token string">'jd.ico'</span><span class="token punctuation">)</span>  <span class="token comment"># 更改窗口图标</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后再打包，命令跟之前一样</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pyinstaller -F -w -i logo.ico main.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是打包后，图标需和exe程序，目录保持一致。</p> <p><img src="%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234455129.png" alt="image-20211224234455129"></p> <p>当然你想改目录也可以。修改这句代码就可以实现。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>window<span class="token punctuation">.</span>iconbitmap<span class="token punctuation">(</span><span class="token string">'xxx文件夹/yyy文件夹/jd.ico'</span><span class="token punctuation">)</span>  <span class="token comment"># 更改窗口图标</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="如何防止别人轻松反编译自己的源代码"><a href="#如何防止别人轻松反编译自己的源代码" class="header-anchor">#</a> 如何防止别人轻松反编译自己的源代码</h2> <p>pyinstaller，自带了自己的加密方式，只需要<code>--key=123456</code>就可以实现。这种方式只能在一定程度上防止别人轻松的脱你的壳，解你的密。作用一点点吧，具体的硬核操作，稍后我也许会说到。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pyinstaller -F  -i jd.ico --clean -w  --key <span class="token number">123456</span>  JDGui.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>这里的clean，我只是为了清除缓存后打包，防止缓存仍存在，打包后，程序功能存在异常</strong></p> <h2 id="加餐"><a href="#加餐" class="header-anchor">#</a> 加餐</h2> <p>最后附上pyinstaller常用的几个参数，可以减少大家爬帖子浪费的时间。</p> <table><thead><tr><th>参数</th> <th>含义</th></tr></thead> <tbody><tr><td>-F</td> <td>打包单个文件，生成结果是一个exe文件，如果代码都写在一个.py文件时使用，项目有多个文件时不要使用</td></tr> <tr><td>-i</td> <td>指定程序的图标</td></tr> <tr><td>-w</td> <td>不显示dos窗口（命令行）</td></tr> <tr><td>-c</td> <td>显示dos窗口（命令行）</td></tr> <tr><td>-h</td> <td>显示帮助</td></tr> <tr><td>-v</td> <td>显示版本号</td></tr> <tr><td>--key=密码</td> <td>加密打包</td></tr></tbody></table> <p><strong>不过，我感觉pyinstaller打包，有一个缺点，本来一个几十kb的代码文件，经过打包后，竟然有10多Mb</strong></p> <p><img src="%E3%80%90python%E3%80%91pyinstaller%E6%89%93%E5%8C%85exe%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%97%A0%E9%9C%80python%E7%8E%AF%E5%A2%83%E4%BA%A6%E5%8F%AF%E8%BF%90%E8%A1%8C.assets/image-20211224234529570.png" alt="image-20211224234529570"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xiaorui16888/edit/master/docs/Notes/Python相关/【python】pyinstaller打包exe，程序无需python环境亦可运行.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/6/2022, 1:36:29 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Notes/Python相关/Python GUI中 text框里实时输出.html" class="prev">
        Python GUI中 text框里实时输出
      </a></span> <span class="next"><a href="/Notes/Python相关/使用pyinstaller打包，subprocess报“句柄无效”错误的解决方法.html">
        使用pyinstaller打包，subprocess报“句柄无效”错误的解决方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7d86dd3d.js" defer></script><script src="/assets/js/2.6390456d.js" defer></script><script src="/assets/js/27.980953ae.js" defer></script>
  </body>
</html>
